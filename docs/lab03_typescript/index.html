<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Student Management System</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">

  <!-- Custom Theme -->
  <style>
    body {
      background: radial-gradient(circle at top left, #e0f2fe, #eef2ff 40%, #fdf2ff 100%);
      font-family: "Prompt", sans-serif;
      padding-bottom: 70px;
      animation: fadeIn 0.8s ease;
    }

    .page-shell {
      max-width: 1080px;
      margin: 0 auto;
    }

    h2 {
      color: #0f172a;
      font-weight: 600;
      letter-spacing: 1px;
      margin-bottom: 0;
    }

    .subtitle {
      color: #64748b;
      font-size: 0.95rem;
    }

    .top-bar {
      position: sticky;
      top: 0;
      z-index: 10;
      padding: 16px 0 10px;
      margin-bottom: 18px;
      background: rgba(248, 250, 252, 0.9);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(148, 163, 184, 0.25);
    }

    .tag-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(129, 140, 248, 0.12);
      color: #4f46e5;
      font-size: 0.75rem;
      font-weight: 500;
    }

    .tag-pill span.icon {
      font-size: 0.9rem;
    }

    .card {
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.25);
      background: rgba(255, 255, 255, 0.92);
      box-shadow: 0 14px 36px rgba(15, 23, 42, 0.08);
      transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);
      border-color: rgba(129, 140, 248, 0.45);
    }

    .card-header-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 6px;
    }

    .card-header-title span.icon {
      font-size: 1.1rem;
    }

    .card-hint {
      font-size: 0.8rem;
      color: #94a3b8;
      margin-bottom: 14px;
    }

    .section-label {
      text-transform: uppercase;
      letter-spacing: 0.09em;
      font-size: 0.7rem;
      color: #9ca3af;
      font-weight: 600;
    }

    .form-control {
      border-radius: 12px;
      border-color: rgba(148, 163, 184, 0.7);
      font-size: 0.9rem;
    }

    .form-control:focus {
      border-color: #6366f1;
      box-shadow: 0 0 0 1px rgba(79, 70, 229, 0.25);
    }

    .btn-primary-soft {
      background: linear-gradient(135deg, #4f46e5, #6366f1);
      color: white;
      border-radius: 999px;
      padding-inline: 18px;
      font-weight: 500;
      border: none;
      font-size: 0.9rem;
      box-shadow: 0 10px 25px rgba(79, 70, 229, 0.35);
      transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
    }

    .btn-primary-soft:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 30px rgba(67, 56, 202, 0.45);
      opacity: 0.96;
      color: #fff;
    }

    .btn-outline-soft {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      color: #0f172a;
      background: rgba(248, 250, 252, 0.9);
      font-size: 0.85rem;
      font-weight: 500;
      padding-inline: 16px;
      transition: 0.2s ease;
    }

    .btn-outline-soft:hover {
      background: #e5e7eb;
      border-color: rgba(148, 163, 184, 1);
      color: #111827;
    }

    .btn-danger-soft {
      border-radius: 999px;
      border: none;
      padding-inline: 15px;
      font-size: 0.85rem;
      background: rgba(239, 68, 68, 0.1);
      color: #b91c1c;
      font-weight: 500;
      transition: 0.2s ease;
    }

    .btn-danger-soft:hover {
      background: rgba(239, 68, 68, 0.2);
      color: #7f1d1d;
    }

    .btn-chip {
      font-size: 0.75rem;
      border-radius: 999px;
      padding-block: 4px;
      padding-inline: 10px;
    }

    .table-wrapper {
      overflow-x: auto;
    }

    .table thead {
      background: linear-gradient(135deg, #e0e7ff, #dbeafe);
      color: #111827;
    }

    .table thead th {
      border-bottom-width: 1px !important;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.07em;
    }

    .table tbody td {
      font-size: 0.88rem;
      vertical-align: middle;
    }

    .badge-year {
      border-radius: 999px;
      padding: 3px 9px;
      font-size: 0.75rem;
      background: rgba(45, 212, 191, 0.15);
      color: #0f766e;
    }

    .badge-major {
      border-radius: 999px;
      padding: 3px 9px;
      font-size: 0.75rem;
      background: rgba(59, 130, 246, 0.12);
      color: #1d4ed8;
    }

    .fire-effect {
      animation: fireGlow 0.8s ease-in-out 2;
      background: rgba(251, 191, 36, 0.08) !important;
    }

    @keyframes fireGlow {
      0% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.5); }
      50% { box-shadow: 0 0 0 6px rgba(251, 191, 36, 0.2); }
      100% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0); }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(6px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body class="p-3 p-md-4">
  <div class="page-shell">
    <!-- Header -->
    <div class="top-bar">
      <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-2">
        <div>
          <h2>Student Management System</h2>
          <p class="subtitle mb-0">‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö ¬∑ ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ¬∑ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß</p>
        </div>
        <div class="d-flex gap-2 justify-content-start justify-content-md-end">
          <div class="tag-pill">
            <span class="icon">üéì</span> <span>Lab Typescript Demo</span>
          </div>
          <div class="tag-pill">
            <span class="icon">üíæ</span> <span>Auto Save: LocalStorage</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ADD STUDENT FORM -->
    <div class="card p-4 mb-4">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <div>
          <div class="section-label">Student profile</div>
          <div class="card-header-title">
            <span class="icon">‚ûï</span>
            <span>‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</span>
          </div>
        </div>
        <button id="clearAllBtn" class="btn-danger-soft">
          ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        </button>
      </div>
      <p class="card-hint">
        ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" ‡∏´‡∏≤‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ñ‡∏ß‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
      </p>

      <div class="row g-3">
        <div class="col-md-2">
          <label class="form-label mb-1">Student ID</label>
          <input id="id" type="text" class="form-control" placeholder="6633xxxx" />
        </div>
        <div class="col-md-2">
          <label class="form-label mb-1">‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤</label>
          <input id="title_name" type="text" class="form-control" placeholder="‡∏ô‡∏≤‡∏¢ / ‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß" />
        </div>
        <div class="col-md-3">
          <label class="form-label mb-1">‡∏ä‡∏∑‡πà‡∏≠</label>
          <input id="first_name" type="text" class="form-control" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á" />
        </div>
        <div class="col-md-3">
          <label class="form-label mb-1">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
          <input id="last_name" type="text" class="form-control" placeholder="‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" />
        </div>
        <div class="col-md-4">
          <label class="form-label mb-1">Email</label>
          <input id="email" type="email" class="form-control" placeholder="example@kku.ac.th" />
        </div>
        <div class="col-md-2">
          <label class="form-label mb-1">‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ</label>
          <input id="year" type="number" class="form-control" placeholder="1 - 4" />
        </div>
        <div class="col-md-4">
          <label class="form-label mb-1">‡∏™‡∏≤‡∏Ç‡∏≤</label>
          <input id="major" type="text" class="form-control" placeholder="Computer Science" />
        </div>

        <div class="col-md-3 mt-2 d-grid">
          <button id="addBtn" class="btn-primary-soft">
            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
          </button>
        </div>
      </div>
    </div>

    <!-- SEARCH ZONE -->
    <div class="card p-4 mb-4">
      <div class="section-label mb-1">Search & filter</div>
      <div class="card-header-title mb-1">
        <span class="icon">üîé</span>
        <span>‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</span>
      </div>
      <p class="card-hint">
        ‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÑ‡∏Æ‡πÑ‡∏•‡∏ï‡πå‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà‡∏û‡∏ö‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
      </p>

      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label mb-1">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠</label>
          <div class="input-group">
            <input id="searchName" class="form-control" placeholder="‡∏õ‡πâ‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" />
            <button id="searchNameBtn" class="btn-outline-soft btn-chip">
              ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
            </button>
          </div>
        </div>

        <div class="col-md-4">
          <label class="form-label mb-1">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏≤‡∏Ç‡∏≤</label>
          <div class="input-group">
            <input id="searchMajor" class="form-control" placeholder="‡πÄ‡∏ä‡πà‡∏ô Computer Science" />
            <button id="searchMajorBtn" class="btn-outline-soft btn-chip">
              ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
            </button>
          </div>
        </div>

        <div class="col-md-4">
          <label class="form-label mb-1">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Email</label>
          <div class="input-group">
            <input id="searchEmail" class="form-control" placeholder="‡∏Å‡∏£‡∏≠‡∏Å Email ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤" />
            <button id="searchEmailBtn" class="btn-outline-soft btn-chip">
              ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- TABLE -->
    <div class="card p-4">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <div class="section-label">Student list</div>
        <span class="card-hint mb-0">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏∂‡πâ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</span>
      </div>

      <div class="table-wrapper">
        <table class="table table-bordered table-striped align-middle mb-0">
          <thead>
            <tr>
              <th>ID</th>
              <th>‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤</th>
              <th>‡∏ä‡∏∑‡πà‡∏≠</th>
              <th>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
              <th>Email</th>
              <th>‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ</th>
              <th>‡∏™‡∏≤‡∏Ç‡∏≤</th>
              <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
            </tr>
          </thead>
          <tbody id="studentTableBody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Bootstrap Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    let editIndex = -1;
    const tableBody = document.getElementById("studentTableBody");

    function loadData() {
      const data = localStorage.getItem("students_v2");
      return data ? JSON.parse(data) : [];
    }

    function saveData(data) {
      localStorage.setItem("students_v2", JSON.stringify(data));
    }

    function renderTable() {
      const data = loadData();
      tableBody.innerHTML = "";

      data.forEach((std, index) => {
        const tr = document.createElement("tr");

        tr.innerHTML = `
          <td>${std.id}</td>
          <td>${std.title_name}</td>
          <td>${std.first_name}</td>
          <td>${std.last_name}</td>
          <td>${std.email}</td>
          <td><span class="badge-year">‡∏õ‡∏µ ${std.year}</span></td>
          <td><span class="badge-major">${std.major}</span></td>
          <td class="text-nowrap">
            <button class="btn-outline-soft btn-chip me-1" onclick="editStudent(${index})">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
            <button class="btn-danger-soft btn-chip" onclick="deleteStudent(${index})">‡∏•‡∏ö</button>
          </td>
        `;

        tableBody.appendChild(tr);
      });
    }

    function editStudent(index) {
      const data = loadData();
      const std = data[index];

      editIndex = index;

      document.getElementById("id").value = std.id;
      document.getElementById("title_name").value = std.title_name;
      document.getElementById("first_name").value = std.first_name;
      document.getElementById("last_name").value = std.last_name;
      document.getElementById("email").value = std.email;
      document.getElementById("year").value = std.year;
      document.getElementById("major").value = std.major;

      document.getElementById("addBtn").innerText = "‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
    }

    function deleteStudent(index) {
      const data = loadData();
      data.splice(index, 1);
      saveData(data);
      renderTable();
    }

    document.getElementById("addBtn").addEventListener("click", () => {
      const std = {
        id: document.getElementById("id").value,
        title_name: document.getElementById("title_name").value,
        first_name: document.getElementById("first_name").value,
        last_name: document.getElementById("last_name").value,
        email: document.getElementById("email").value,
        year: document.getElementById("year").value,
        major: document.getElementById("major").value,
      };

      let data = loadData();

      if (editIndex === -1) {
        data.push(std);
      } else {
        data[editIndex] = std;
        editIndex = -1;
        document.getElementById("addBtn").innerText = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
      }

      saveData(data);
      renderTable();
    });

    document.getElementById("clearAllBtn").onclick = () => {
      if (confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
        localStorage.removeItem("students_v2");
        renderTable();
      }
    };

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏ö‡∏ö 3 ‡∏ä‡πà‡∏≠‡∏á (‡πÑ‡∏Æ‡πÑ‡∏•‡∏ï‡πå‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà match)
    function searchAndFire(inputId) {
      const key = document.getElementById(inputId).value.toLowerCase();
      const rows = tableBody.getElementsByTagName("tr");

      [...rows].forEach((r) => {
        r.classList.remove("fire-effect");

        if (r.innerText.toLowerCase().includes(key) && key !== "") {
          r.classList.add("fire-effect");
        }
      });
    }

    document.getElementById("searchNameBtn").onclick = () => searchAndFire("searchName");
    document.getElementById("searchMajorBtn").onclick = () => searchAndFire("searchMajor");
    document.getElementById("searchEmailBtn").onclick = () => searchAndFire("searchEmail");

    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å (‡πÑ‡∏°‡πà‡∏°‡∏µ popup ‡πÅ‡∏•‡πâ‡∏ß)
    window.onload = () => {
      renderTable();
    };
  </script>
</body>
</html>
